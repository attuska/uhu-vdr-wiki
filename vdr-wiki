A vdr felhasználókat érintő könyvtárai, melyeket minden felhasználó módosíthat, beléjük írkálhat.

Minden alább felsorolt könyvtár users (999) csoportú, a tulajdonostól függetlenül.
Épp ezért a vdr indítás root felhasználóként erősen ellenjavallt!
(Hogy ne hozzon létre a root bennük más által módosíthatatlan fájlt.)

/var/vdr/video
A felvételek könyvtára.

/etc/vdr
A fő konfigurációs könyvtár, melybe mi is, meg a vdr is írkál

/etc/vdr/plugins
A pluginok konfigurációs könyvtára, melybe a pluginok is írkálnak

/etc/vdr/conf.d
A vdr működését definiáló könyvtár.
Az ebben lévő tetszőleges nevű fájlokat a vdr csak akkor olvassa, ha nem volt indításakor parancssori kiegészítése. ABC rendben olvassa őket és parancssor kiegészítésként értelmezi és használja őket. A fájlokban # -el kezdő sorokat figyelmen kívül hagyja, mindegyiket soronként olvassa.
Az első sorban szerepló [pluginnév] hatására betölti a plugint, a fájlban szereplő többi sorban leírt cuccokat meg az illető pluginnak fogja átadni paraméterként. Ha az első sorban [vdr] szerepel, akkor ez nem plugin, hanem magának a vdr -nek szól.
Az ebben a könyvtárban lévő és a pluginok feltelepítésekor szállított fájlokat tehát meg kell szerkesztgetnünk a kívánt vdr konfigurációnk szerint.

A vdr indítására több lehetőségünk is van.

1. A menüben van egy sima vdr ikon, mely a vdr -t indítja a /etc/vdr/conf.d szerint.

2.Van egy másik is, a vdr-szkriptes, mely az eddig megszokott módon a /usr/bin/vdrlaunch nevű indítót indítja, mely a /usr/share/vdr/vdrstart szkriptet másolja be először a /etc/vdr könyvtárba, ha az ott nem lenne és azzal indítja a vdr-t, az abban általunk szerkeszthető paraméterekkel.

Ezt a 2. -es módot nem likvidáltam, mert nagyobb így a szabadság fok.

Az átállással egyidőben pár pluginunk új nevet kapott:

vdr-sc -> vdr-plugin-sc
vdr-channellist -> vdr-plugin-channellists
vdr-dvd ->vdr-plugin-dvd
vdr-chanman -> vdr-plugin-chanman
vdr-skinenigmang -> vdr-plugin-skinenigmang
vdr-streamdev -> vdr-plugin-streamdev
vdr-text2skin -> vdr-plugin-text2skin
vdr-zappilot -> vdr-plugin-zappilot

Az újak valamennyien helyettesítik a régit, tehát ütköznek e régivel, de ez nem is baj, hisz úgysem lehet az API változás miatt a régieket használni.
Tehát természetes, hogy az újak leszedik feltelepülésük előtt a régieket.


A vdr feltelepítésekor ezeket a konfigurációs fájlokat szállítja:

/etc/vdr/conf.d/01-vdr.conf
/etc/vdr/conf.d/50-dvbsddevice.conf
/etc/vdr/conf.d/50-hello.conf
/etc/vdr/conf.d/50-pictures.conf
/etc/vdr/conf.d/50-rcu.conf
/etc/vdr/channels.conf
/etc/vdr/diseqc.conf
/etc/vdr/keymacros.conf
/etc/vdr/scr.conf
/etc/vdr/sources.conf
/etc/vdr/svdrphosts.conf


Ezek csak példa konfigurációk, a channels.conf a 19.2E Astra műholdon lévő német adók listáját tartalmazza. Valószínű, hogy nekünk nem erre lesz szükségünk. A diseqc.conf csak a műholdasoknak kell többfejes, vagy forgatómotoros rendszerekhez, földi és kábel adóknál biztos nem kell. A sources.conf az aktuálisan működő műholdak listáját tartalmazza. A remote.conf, a setup conf még hiányzik, majd menet közben jönnek létre. A /etc/vdr/conf.d/01-vdr.conf tanulmányozása és szerkesztése sokat segíthet. A péda pluginokra valószínűleg soha nem lesz szükségünk, habár ki tudja?
Minimális induláshoz elegendő egy megjelenítő plugin, sőt, mi több, dvb eszköz híján is indul.

Az alap vdr önmagában pluginok nélkül csak akkor használható, ha a dvb kártya képes videó és hang megjelenítésére, azaz "full featured" képességű, ekkor a dvb eszköz rendelkezik magában is valamilyen megjelenítő kimenettel, melyre a megjelenítő eszköz csatlakozhat.
Ha nem ilyen a dvb eszköz, akkor vagy adatfolyam továbbító, vagy megjelenítő pluginra van szüksége.

Kódolt adók vételéhez előfizetéses kártya kell és ennek fogadására képes DVB eszköz.
Ha az eszköz nem ilyen, akkor is kell elérhető előfizetéses kártya valamilyen kártyaolvasóban, melyhez a vdr pluginnal csatlakozni tud.

Fontosabb pluginok
vdr-dvbapi
vdr-plugin-sc

Adatfolyam pluginok

vdr-plugin-streamdev: hálózatba továbbítja az adatfolyamot
vdr-plugin-xvdr: Az xbmc, újabb nevén a kodi számára szolgáltatja az adatfolyamot.

Megjelenítő pluginok

vdr-softhddevice: ffmpeg alapú truecolor
vdr-xineliboutput: xine-lib alapú
vdr-xine: xine-ui -t használó
skincurses: csak karakteres terminált használó és a kezelő felületet megjelenítő 

Kódolt adók vételét elősegítő pluginok

vdr-plugin-sc: hagyományos kártyaolvasókhoz csatlakozás
vdr-dvbapi: OSCAM kártyakezelő szerverhez csatlakozás

OSD felület pluginok

vdr-skinelchi
vdr-skinflat
vdr-skinflatpus
vdr-skinnopacity
vdr-skinsoppalusikka
vdr-plugin-skinenigmang
vdr-plugin-text2skin

Kényelmi pluginok

vdr-femon: csatorna térerő és infó
vdr-live: a vdr vezérlése hálózati böngészőkből 
vdr-osdteletext: teletext
vdr-plugin-chanman: csatorna csoportosítás
vdr-plugin-channellists: csatornalista váltás
vdr-plugin-dvd: dvd lejátszás
vdr-remote: távirányító használata
vdr-epgfixer: EPG javító
vdr-plugin-zappilot: gyors csatornaváltás
vdr-screenshot: képernyőfotó
vdr-tvguide: kényelmesebb EPG
vdr-wirbelscan: csatornakeresés



Alapból a vdr a beleépített Lcars skin-nel indul. 
A vdr, ha valamit nem talál, vagy rossz a paramétere, akkor csak villan egyet, és kilép.
Ilyenkor, hogy szóra bírjuk, tanácsos terminálból indítani először, vagy a vdrlaunch (szkripes indítás), vagy a sima vdr (/etc/conf.d indítás) paranccsal.
Ha ilyenkor sem leszünk okosabbak, akkor nézzünk bele a /var/log/syslog fájlba, mert oda is írkál üzeneteket. Általában nem találja a betölteni kívánt plugint,vagy valamelyik paraméter hibás.
A /etc/vdr/conf.d alatti fájlokat akkor is végigolvassa, a ha az első sora ki van kommentezve!
Jártam már úgy, hogy az egyik fájlban egy - ott maradt # nélkül és emiatt nem indult.

A /etc/vdr/setup.conf -ban is lehet, hogy valami nem jó és emiatt nem indul, tehát azzal is lehet próbálkozni, hogy ezt a fájlt ideiglenesen kivesszük a látóköréből, hogy újat gyártson!

A xineliboutput plugin szinte mindig működik általában nem kell neki külön opció az ablakjának megjelenéséhez, ha megfelelő opcióját választjuk, a --video=xv a legbiztosabb. Illetve a --video=auto.
UBK2 -n nekem egyből szó nélkül kilépett, csak a "-Pxineliboutput --video=auto" hatására indult el, második indításhoz ez már nem kellet, simán elindult.
A xineliboutput plugin csak a --hud opcióval, tehát hardveres OSD esetén használhat a skinflat, skinflatplus pluginokkal, a skinnopacity esetén még így sem. Reméljük, hogy helyre lesz hozva ez a hiba. Erről egyébként hagy üzenetet a syslogban, ha a vdr log level-je legalább 3. Ez az alapértelmezett egyébként.
A xineliboutput is temérdek beállítási lehetőséggel rendelkezik. Ha nincs hang, akkor a menüjében erre is van megoldás, kimeneti eszközként a default elég jó eredményt ad.

A softhddevice plugin is használható a xineliboutput plugin helyett megjelenítőként, főleg akkor, ha nvida kártyánk van.
Harveres DVB eszköz híján a videó lejátszási menü nincs nál, ami a xineliboutput esetében megjelenik.
Ez a plugin hardveresen gyorsított megjelenítést használ, újabban az ATI kártyáknál is működik. Nvidia kártya esetén ajánlottabb a használata, mint a xineliboutput, mivel minden OSD működik vele. Ellenben UHU-RIA alatt valamiért duplázza a képeket, azaz akadozik a képmegjelenetítés nvidia drájverrel, ha a szoftveres kompozitálás a z asztalkezelőben engedélyezve van. Nouveau meghajtóval érdekes módon jó az nvidia kártyával. Nouveau használata estén ajánlatos a nouveau-vdpau-fw csomag feltelepítése, hogy hardveresen dekódoljon a grafikus megjelenítő nvidia chip.

Távirányító, billentyűzet betanítása, használata.

A /etc/vdr/remote.conf törlésével( átnevezésével) rá lehet venni a vdr-t, hogy induláskor újra billentyűzetet/távirányítógombokat definiálhassunk.
Ez a Távirányító betanítása üzenet nekem a softhddevice megjelenítővel nem látszik, csak a xineliboutputtal. Jó ötlet, ha a vdr -t a -Pskincurses paranccsal indítjuk terminálból, mivel a skincurses menü a terminálban jelenik meg, ahol a betanítás szépen elvégezhető.
Ha távirányítót szeretnénk billentyűzet helyett használni, akkor vdr nélkül kell először beüzemelni a távirányítót. Ez távirányító fajta függő teljesen, ehhez tanulmányozni kell a lirc honlapját.
Ha lirc segítségével végeztük, akkor a lirc daemon elindítása után az irw paranccsal ellenőrizhetjük le a helyes működést. Ha már működik, akkor a /etc/vdr/conf.d mappában beírhatjuk a vdr.conf fájlba a --lirc sort, ekkor már a vdr a lirc jelenlétét is érzékelni és használni tudja, a remote.conf törlése után betanítható a távirányító használatára is. Ha xineliboutput megjelenítőt használunk lirc irányítással és nem szeretnénk, hogy megjelenjen az irányítás betanító üzenet az induláskor, akkor a xineliboutput beállító menüjében le kell tiltani a billentyűzet használatát, nem elég a --no-kbd a konfigurációs fájlban.

A /etc/vdr/setup.conf fájlba a vdr is és a pluginok is hoznak létre bejegyzéseket.
Továbbá a /etc/vdr/plugins/pluginnév könyvtárba is írkálhatnak a pluginok maguknak beállítási feljegyzéseket.
Sokszor előfordult már velem, hogy egyes komolyabb konfigurálási változtatás, vagy összetevő frissítése után, vagy ki tudja, hogy miért, de egyes bejegyzések hibás működést, sőt a vdr összeomlását eredményezi.
Ha sikerül kideríteni az összeomlást okozó bűnös plugint (a pluginsorból kivéve) , akkor ennek a pluginnak a bejegyzéseit törölve ebből a setup.conf fájlból újra életre kelthető a vdr.

A vdr-xine plugin használatáról.

A xine letjátszó is használható a megjelenítéshez, ha a betöltetjük ezt a plugint, a xine-ui valamennyi skin-hez használható.
A lejátszás, miután a vdr már fut, a xine vdr:// paranccsal lehetséges.
A xine-ui -n a vdr gomb nem látszik az alapértelmezett skinnel, csak a xinium skinre fér rá, ott már látható és a skinből is indul a vdr, ha a gombra nyomunk.
A videó megjelenítésének minősége a xine konfigurációjától függ. Lehet irányítan a vdr távirányítójával a vdr-t, vagy a xine menüjével. 

A vdr/xbmc páros meg nyugodtan indul a régi módon, hisz ott parancssorból szkript által indul az xbmc indulása előtt a -Psc és a -Pxvdr paraméterekkel.
UHU-RIA alatt az xbmc nevét mindenütt felváltotta a kodi név, az sc plugin léte nem kötelező már.


UHU-2.2 alatti jellegzetességek.

Az UHU-3 -hoz képest a változás itt annyi, hogy a pluginok alap config fájljai a /etc/vdr/conf.avail könyvtárba települnek.
Amennyiben a VDR-t a /etc/vdr/conf.d használatával indítjuk a sima vdr paranccsal, vagy a sima vdr indító menüponttal, akkor a betöltendő plugin config fájlját a /etc/vdr/conf.d -be kell linkelnük, ha meg változtatva szeretnénk használni, akkor linkelés helyett bemásoljuk oda és kívánságunknak megfelelően megszerkesztjük.

Így jobban áttekinthetők a betöltendő pluginok.

UHU-3 alá is átraktam a a pluginok alap konfigurációs fájljait a /etc/vdr/conf.avail könyvtárba.
A vdrctl programocskával lehet a /etc/vdr/conf.d alatti linkeket létrehozatni, törölni, vagyis a pluginokat aktiválni, deaktiválni. Ez sajnos UHU-2.2 alatt nem működik.
A vdrctl paraméter nélkül kilistázza a pluginokat és állapotukat, szépen színesen.
Az enabled zöld, a disabled piros, a static fekete színű.

attila:~$ vdrctl
PLUGIN                STATE
chanman               enabled
channellists          enabled
dvbapi                enabled
dvbsddevice           disabled
dvd                   disabled
epgfixer              disabled
femon                 enabled
hello                 disabled
live                  disabled
osdteletext           enabled
pictures              disabled
rcu                   disabled
remote                disabled
sc                   disabled
screenshot            disabled
skinelchi             disabled
skinenigmang          disabled
skinflat              disabled
skinflatplus          disabled
skinnopacity          enabled
skinsoppalusikka      disabled
softhddevice          enabled
streamdev-server      disabled
text2skin             disabled
tvguide               disabled
vdr                   static
wirbelscan            disabled
xine                  disabled
xineliboutput         disabled
xvdr                  disabled
zappilot              enabled
attila:~$

A vdrctl --help segítséget ad a használatához.
